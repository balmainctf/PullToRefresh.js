!function(a){function b(a){return this instanceof b?(this.onRefresh=null,this.initialized=!1,this):void 0}var c=a.document;a.PullToRefresh=b,b.prototype={init:function(a){return this.locked=!1,this.paused=!1,this.page=1,this.max_page=0,this.configure(a),this.initialized||(this.initialized=!0,this.initEvent()),this},initEvent:function(){var b=this;a.addEventListener("scroll",function(){b.paused||b.locked||c.body.scrollHeight-a.innerHeight-c.body.scrollTop<50&&b.refresh()},!1)},configure:function(a){if(a&&"object"==typeof a&&a instanceof Object)for(var b in a)this[b]=a[b]},refresh:function(){this.page>=this.max_page||this.onRefresh&&"function"==typeof this.onRefresh&&(this.locked=!0,this.onRefresh()===!0&&this.page++,this.locked=!1)},pause:function(){this.paused=!0},resume:function(){this.paused=!1}}}(window);